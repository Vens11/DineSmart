<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DineSmart â€“ Admin Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

<div class="dashboard-page">

    <!-- ================= HEADER ================= -->
    <div class="dashboard-header">
        <h1>ğŸ›  Admin Dashboard</h1>
        <p>System-wide food waste monitoring</p>

        <div class="header-actions">
            <a href="/logout" class="add-btn">Logout</a>
        </div>
    </div>

    <!-- ================= SELECT RESTAURANT ================= -->
    <div class="card admin-card">
        <h3>ğŸª Select Restaurant</h3>
        <p class="muted">View restaurant-wise waste insights</p>

        <form method="get" action="/admin">

            <select name="restaurant_id" class="admin-select" required>
                <option value="">Choose restaurant</option>

                {% for r in restaurants %}
                    <option value="{{ r.id }}"
                        {% if selected_restaurant == r.id %}selected{% endif %}>
                        {{ r.name }}
                    </option>
                {% endfor %}
            </select>

            <button type="submit" class="add-btn" style="margin-top:14px;">
                View Insights
            </button>
        </form>
    </div>

    <!-- ================= RESTAURANT ANALYTICS ================= -->
    {% if analytics %}
    <div class="dashboard-grid">

        <!-- Waste Summary -->
        <div class="card">
            <h3>ğŸ“‰ Waste Summary</h3>
            <p>Most wasted item</p>
            <p class="highlight">{{ analytics.worst_food }}</p>
            <p>Total wasted units:
                <strong>{{ analytics.waste_qty }}</strong>
            </p>
        </div>

        <!-- Top 3 -->
        <div class="card">
            <h3>ğŸ”¥ Top 3 Wasted Foods</h3>
            <ul>
                {% for item in analytics.top_3 %}
                    <li>
                        {{ item.food_item }} â€“
                        <strong>{{ item.wasted }}</strong> units
                    </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Cost Impact -->
        <div class="card">
            <h3>ğŸ’° Cost Impact</h3>
            <p>Total waste cost</p>
            <p class="highlight">â‚¹{{ analytics.total_cost }}</p>
        </div>

        <!-- AI Recommendation -->
        <div class="card">
            <h3>ğŸ¤– AI Recommendation</h3>
            <p>{{ analytics.ai_message }}</p>
        </div>

    </div>
    {% endif %}

    <!-- ================= COMPARISON CHART ================= -->
    <div class="card" style="max-width:900px; margin:40px auto;">
        <h3>ğŸª Restaurant Waste Comparison</h3>

        <div class="chart-container">
            <img
                src="/static/graphs/restaurant_comparison.png"
                alt="Restaurant Waste Comparison"
                class="admin-graph"
            >
        </div>
    </div>

</div>

</body>
</html>